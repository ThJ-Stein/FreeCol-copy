language: java
jdk:
- openjdk12
env:
  matrix:
  - DSTAMP=$(date +%F)
  global:
    secure: "ZmrxnNctXlIWSAQnd3CYJTHvziBCKE+8UHsnZOM5pLR6guiq2czAw1aI3lzrboxl76mEUbXcNPm4/KD9jiEsibJK9aXzmKTiIbeThxhcXjFXwNcRaaEIzMSIWv1u84rXxgXtJk6dR2J/pZqwwUwJcnqxyDfW31NLbewLNmaf7Rq+Tx2sU749qlghGR2L6Lrr//yVXS3HNH9hXPUN6zjvNsIAmyRg1Or70TqeEtFoflbRq4/9bRiz1nvfHJ6t3onvP4kjK3glZAkPa3pneDXYZgm4hv+3wYLTaEL/0+HaS4SCY7Uu2OFKwnkCu75Yl83k2ZuR1zgXg4oVSGIdMmYoH1zrjSEEo6fKqaalPySxS7QWyYOHyD5u8xzFdFRNI561p21gnuZBQ1rrZjda2q4RncmFps2KnEM7bSPokbGMAAXDcLcQYEXybW/JWFyKkRvBFzVFiFcVCJHGyE67ONZBPm89lr2FjAfCur3xmaRejclYunA5s3aQdIseu5s/598Z4LSisnPHPdqrS2kChJARAvHUa8+N9FD1CFINzKfRDTtIbBFvl7Xa6Wqld8INGjYIPW8catcow4ynSKDKrLj5yFV67gexcLVJ3fS6mEjzFQjGgVxLkb6yQcieAqA48iz8zqdkBixX3QxLJfNlWGRjhdDJ66oI1O/s8lezszI+RZE="
    COVERITY_SCAN_TOKEN: "_gnYNv1ZwX9uS8YT23rjew"
    PROJECT_NAME: "ThJ-Stein/FreeCol-copy"
before_install:
  - echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-
addons:
  apt:
    packages:
    - ant-optional
  coverity_scan:
    project:
      name: "ThJ-Stein/FreeCol-copy"
      description: "project to learn about automated CI/CD pipelines"
    notification_email: t.stouten@student.utwente.nl
    build_command_prepend: "cov-configure --java"
    build_command: "ant nightly-release"
    branch_pattern: coverity_scan
script:
- ant testci
before_deploy:
- ant nightly-release
- ls -l dist/releases
deploy:
  provider: releases
  skip_cleanup: true
  tag_name: nightly-$DSTAMP
  prerelease: true
  name: 'Nightly Release: $DSTAMP'
  api_key:
    secure: "GiMJfutrdG+bGDtf1L9EFdo9dp1Gd0N7v4NbxaT7RRjy2Hj9Z6YLYzffvIZDowZNNhZ5KhA1nN16586gwxwZsbQPhxXJd9EZoXFaahLLekWxPjfu1Mb9T2D7jqL3oNr1E2IWC1dS2LXPnoHtMGE8CpBkyXokm5L0T5cWbS6sSeTTOlGbz31GawqtYf4kahzpLpok0zzrQsAVxIffnFvbe54qTcp4tDzI/7CarfBNpeB0Y34ZTuzqeUrPKR+vnCNUSqINxgX3usG9yY31BQa/SWQ+pAI1XiAf9bdw9eg7DkO9Z19jPzsTkgRd7FuVQVllfL8qjHpjsVxMNnJI/nmv2gVdYgPxLQpbzJ86Y1BwdLM0Bewvq41lCJyriKxMv9mNRByfNoZ3U3yJlqLS2k9985f1BZBZotDOovnG2az+4d1F07Af3nIlJfbVJaP6Z1flwtoABvhwF1JRTB21dV9q8LQ8eBZKoUHHWQwEMDjjO7eeT+sdtuFIzLetMk6DoRm2jzsvNiJlM3Kj+qoGPTpniU3q2wx+WKp3R6ZFZN0yLIPvF+KdFcqYvnn6ZFm9Q/2x8oblQ98xfEerbEgi/aH5gWJ550e0LO7G6bPMkN9k4hv18fFXdgaeZ7aSqdN+Fn6+GaKCwD+CL1haTAb7Czi6DQ7bdk1Rq+SNzvZ9og79a4I="
  file: dist/releases/*
  on:
    repo: ThJ-Stein/FreeCol-copy
    branch: master

